<form (ngSubmit)="salvar()" class="mb-3">
  <div class="mb-3">
    <label for="cliente" class="form-label">Cliente:</label>
    <select class="form-select" name="cliente" [(ngModel)]="pedido.clienteId" (change)="carregarEnderecos()">
      <option *ngFor="let cliente of listaClientes" [ngValue]="cliente">{{ cliente.nome }}</option>
    </select>
  </div>
  <div class="mb-3">
    <label for="endereco" class="form-label">Endereço:</label>
    <select class="form-select" name="endereco" [(ngModel)]="enderecoSelecionado" [disabled]="!pedido.clienteId">
      <ng-container *ngIf="pedido.clienteId">
        <option *ngFor="let endereco of pedido.clienteId.enderecos" [ngValue]="endereco">{{ endereco.rua }}, {{ endereco.bairro }}</option>
      </ng-container>
    </select>
  </div>
  
    <div class="d-flex justify-content-between" style="margin-bottom: 1rem;">
      <button type="button" (click)="adicionarProduto(modalListaProdutos)" class="btn btn-success text-white">Adicionar produto</button>
    </div>
    <table class="table table-bordered table-hover">
        <thead>
            <tr>
                <th>Nome</th>
                <th>Valor</th>
                <th>Sabores</th>
                <th>Açoes</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let produto of pedido.produtos; let i = index">
                <td>{{ produto.nome }}</td>
                <td>{{ produto.valor}}</td>
                <td>{{ produto.sabores}}</td>
                <td>
                    <button type="button" (click)="editarProduto(modalListaProdutos, produto, i)" class="btn btn-success text-white">Editar</button>
                    <button type="button" (click)="excluirProduto(i)" class="btn btn-danger btn-sm">Deletar</button>
                </td>
            </tr>
        </tbody>
    </table>
    <div class="d-flex justify-content-center">
        <button type="submit" class="btn btn-success">Salvar</button>
    </div>
</form>


<ng-template #modalListaProdutos let-modal>
  <div class="modal-header ">
    <h4 id="h4" class="modal-title">{{tituloModal}}</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
  </div>
  <div class="modal-body ">
    
    <app-selecionar-produtos [produto]="produtoParaEditar" (retorno)="atualizarLista($event)"></app-selecionar-produtos>
           
  </div>
  <div class="modal-footer ">
    <button type="button" class="btn btn-danger " (click)="modal.close('Close click')">Close</button>
  </div>
  </ng-template>